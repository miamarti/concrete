"use strict";var moment=moment||{};String.prototype.formatDate=function(){return moment(this.toString()).format("LL")},angular.module("concreteDevApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]);var $=$||{};angular.module("concreteDevApp").directive("ngConcreteHtml",[function(){return{restrict:"E",link:function(a,b,c){b.context.innerHTML=c.value}}}]),angular.module("concreteDevApp").directive("ngConcreteHtml",[function(){return{restrict:"A",link:function(a,b,c){a.$watch(c.ngConcreteHtml,function(a){void 0!==a&&(b.context.innerHTML=a)})}}}]),angular.module("concreteDevApp").directive("ngConcreteShot",[function(){return{restrict:"A",template:function(){var a="";return a+='   <div class="dimmable image">',a+='        <div class="ui dimmer">',a+='            <div class="content">',a+='                <div class="center">',a+='                    <div class="ui inverted button" data-ng-click="getDetails(data.id)">Detalhes</div>',a+="              </div>",a+="          </div>",a+="        </div>",a+='       <img src="{{data.images.teaser}}">',a+="   </div>",a+='   <div class="content">',a+='     <a class="header">{{data.title}}</a>',a+='     <div class="meta">',a+='         <span class="date text-overflow"><ng-concrete-html value="{{data.description}}" class="text-overflow"></ng-concrete-html></span>',a+="     </div>",a+="   </div>",a+='   <div class="extra content">',a+="     <a>",a+='         <i class="eye icon"></i> {{data.views_count}}',a+="     </a>",a+="     &nbsp;&nbsp;",a+="     <a>",a+='         <i class="like icon"></i> {{data.likes_count}}',a+="     </a>",a+="   </div>"},link:function(a,b,c){setTimeout(function(){$(".special.cards #"+c.id+" .image").dimmer({on:"hover"})},250)}}}]),angular.module("concreteDevApp").directive("infiniteScroll",function(){var a;return{link:function(b,c,d){setTimeout(function(){$(window).on("scroll",function(){$(window).scrollTop()+$(window).height()>=$(c).height()&&(a=setTimeout(function(){b.$apply(d.infiniteScroll)},900))})},1e3)}}}),angular.module("concreteDevApp").factory("dribbbleService",["$http","$q",function(a,b){var c={access_token:"e90d315594bc7d941db90544b1440ea22fecd5327e2a6f37a91977fbd0915e6c",token_type:"concreteDevApp",url:"https://api.dribbble.com/v1/shots/"};return c.getPopularShots=function(d){var e=b.defer();return a.get(c.url,{params:{page:d,sort:"views",access_token:c.access_token,token_type:c.token_type}}).success(function(a){e.resolve(a)}).error(function(a){e.reject(a)}),e.promise},c.getShot=function(d){var e=b.defer();return a.get(c.url+d,{params:{access_token:c.access_token,token_type:c.token_type}}).success(function(a){e.resolve(a)}).error(function(a){e.reject(a)}),e.promise},c}]);var $=$||{};angular.module("concreteDevApp").controller("MainCtrl",["$scope","dribbbleService",function(a,b){a.shots=[],a.page=1,a.slectShot={};var c={runningSroll:!0,main:function(){c.getPopularShots(a.page)},renderShots:function(b){b.forEach(function(b){a.shots.push(b)}),c.setLoading(!1),c.runningSroll=!0},clearShots:function(){a.shots=[],c.runningSroll=!0,c.setLoading(!1)},getPopularShots:function(a){c.setLoading(!0),b.getPopularShots(a).then(c.renderShots,c.clearShots)},getDetails:function(c){b.getShot(c).then(function(b){a.slectShot=b,$(".basic.shot.modal").modal("show")})},setLoading:function(b){a.loading=b?"active":""},loadMore:function(){c.runningSroll&&(a.page++,c.runningSroll=!1,c.getPopularShots(a.page))}};a.loadMore=c.loadMore,a.getDetails=c.getDetails,c.main()}]);