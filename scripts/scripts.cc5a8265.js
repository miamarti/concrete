"use strict";var moment=moment||{};moment.locale("pt-br"),String.prototype.formatDate=function(){return moment(this.toString()).format("LL")},angular.module("concreteDevApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("concreteDevApp").directive("ngConcreteHtml",[function(){return{restrict:"E",link:function(a,b,c){b.context.innerHTML=c.value}}}]),angular.module("concreteDevApp").directive("ngConcreteHtml",[function(){return{restrict:"A",link:function(a,b,c){a.$watch(c.ngConcreteHtml,function(a){void 0!=a&&(b.context.innerHTML=a)})}}}]),angular.module("concreteDevApp").directive("ngConcreteShot",[function(){return{restrict:"A",template:function(){var a="";return a+='   <div class="dimmable image">',a+='        <div class="ui dimmer">',a+='            <div class="content">',a+='                <div class="center">',a+='                    <div class="ui inverted button" data-ng-click="getDetails(data.id)">Detalhes</div>',a+="              </div>",a+="          </div>",a+="        </div>",a+='       <img src="{{data.images.teaser}}">',a+="   </div>",a+='   <div class="content">',a+='     <a class="header">{{data.title}}</a>',a+='     <div class="meta">',a+='         <span class="date text-overflow"><ng-concrete-html value="{{data.description}}" class="text-overflow"></ng-concrete-html></span>',a+="     </div>",a+="   </div>",a+='   <div class="extra content">',a+="     <a>",a+='         <i class="eye icon"></i> {{data.views_count}}',a+="     </a>",a+="     &nbsp;&nbsp;",a+="     <a>",a+='         <i class="like icon"></i> {{data.likes_count}}',a+="     </a>",a+="   </div>"},link:function(a,b,c){setTimeout(function(){$(".special.cards #"+c.id+" .image").dimmer({on:"hover"})},250)}}}]),angular.module("concreteDevApp").directive("infiniteScroll",function(){var a;return{link:function(b,c,d){setTimeout(function(){$(window).on("scroll",function(){$(window).scrollTop()+$(window).height()>=$(c).height()&&(a=setTimeout(function(){b.$apply(d.infiniteScroll)},900))})},1e3)}}}),angular.module("concreteDevApp").factory("dribbbleService",["$http",function(a){var b={access_token:"e90d315594bc7d941db90544b1440ea22fecd5327e2a6f37a91977fbd0915e6c",token_type:"concreteDevApp"};return b.getPopularShots=function(c){return a.get("https://api.dribbble.com/v1/shots",{params:{page:c,sort:"views",access_token:b.access_token,token_type:b.token_type}})},b.getShot=function(c){return a.get("https://api.dribbble.com/v1/shots/"+c,{params:{access_token:b.access_token,token_type:b.token_type}})},b}]),angular.module("concreteDevApp").controller("MainCtrl",["$scope","dribbbleService",function(a,b){a.shots=[],a.page=1,a.slectShot={};var c={runningSroll:!0,main:function(){this.getPopularShots(a.page)},getPopularShots:function(d){c.setLoading(!0),b.getPopularShots(d).success(function(b){b.forEach(function(b){a.shots.push(b)}),c.setLoading(!1),c.runningSroll=!0}).error(function(b){a.shots=[],c.runningSroll=!0,c.setLoading(!1)})},getDetails:function(c){b.getShot(c).success(function(b){a.slectShot=b,console.log(a.slectShot.bio),$(".basic.shot.modal").modal("show")}).error(function(a){})},setLoading:function(b){a.loading=b?"active":""},loadMore:function(){c.runningSroll&&(a.page++,c.runningSroll=!1,c.getPopularShots(a.page))}};a.loadMore=c.loadMore.bind(c),a.getDetails=c.getDetails.bind(c),c.main()}]);